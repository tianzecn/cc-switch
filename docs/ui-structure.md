# CC Switch - UI 结构详解

本文档详细描述了 CC Switch 应用的 UI 结构，使用 ASCII 图展示各页面的布局和组件层级关系。

> 最后更新: 2025-01-10

---

## 目录

1. [应用主框架布局](#1-应用主框架布局)
2. [Providers 页面](#2-providers-页面)
3. [Skills 页面](#3-skills-页面)
4. [Commands 页面](#4-commands-页面)
5. [Agents 页面](#5-agents-页面)
6. [Hooks 页面](#6-hooks-页面)
7. [MCP 页面](#7-mcp-页面)
8. [Prompts 页面](#8-prompts-页面)
9. [Settings 页面](#9-settings-页面)
10. [对话框组件](#10-对话框组件)
11. [DeepLinkImportDialog](#11-deeplinkimportdialog)
12. [UsageDashboard](#12-usagedashboard)
13. [组件层级总览](#13-组件层级总览)

---

## 1. 应用主框架布局

```
┌──────────────────────────────────────────────────────────────────────────────┐
│ ████ 拖拽区域 (28px, data-tauri-drag-region) ████████████████████████████████ │
├──────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│  ┌────────────────────────────────────────────────────────────────────────┐  │
│  │                     EnvWarningBanner (条件渲染)                         │  │
│  │         ⚠️ 检测到环境变量冲突：ANTHROPIC_API_KEY 已设置...              │  │
│  └────────────────────────────────────────────────────────────────────────┘  │
│                                                                              │
│  ┌────────────────────────────────────────────────────────────────────────┐  │
│  │                         UnifiedNavbar                                   │  │
│  │  ┌──────────────────────────────────────────────────────────────────┐  │  │
│  │  │ Row 1: 控制行                                                     │  │  │
│  │  │ ┌──────┐ ┌─────────────────────────┐ ┌──────┐ ┌─────────┐ ┌───┐  │  │  │
│  │  │ │ ← 返回│ │      CC Switch          │ │ ⚙️   │ │ 🔌 Proxy │ │ + │  │  │  │
│  │  │ └──────┘ └─────────────────────────┘ └──────┘ └─────────┘ └───┘  │  │  │
│  │  │                                        ┌─────────────────────────┐│  │  │
│  │  │                                        │ [Claude][Codex][Gemini] ││  │  │
│  │  │                                        │    App 切换器           ││  │  │
│  │  │                                        └─────────────────────────┘│  │  │
│  │  └──────────────────────────────────────────────────────────────────┘  │  │
│  │  ┌──────────────────────────────────────────────────────────────────┐  │  │
│  │  │ Row 2: 功能导航行                                                 │  │  │
│  │  │ ┌──────────┬──────────┬────────┬────────┬─────────┬───────────┐  │  │  │
│  │  │ │ 🔧Skills │ 💻Commands│ 🔗Hooks│ 🤖Agents│ 📚Prompts│ 🖥️ MCP   │  │  │  │
│  │  │ └──────────┴──────────┴────────┴────────┴─────────┴───────────┘  │  │  │
│  │  └──────────────────────────────────────────────────────────────────┘  │  │
│  │  ┌──────────────────────────────────────────────────────────────────┐  │  │
│  │  │ Row 3: 页面特定操作 (根据 currentView 动态渲染)                    │  │  │
│  │  │ ┌────────┬──────────┬────────────┬─────────────┬───────────────┐ │  │  │
│  │  │ │ 🔄 刷新 │ 📥 导入  │ 📤 批量安装 │ 🔍 检查更新 │ 📂 Repo管理   │ │  │  │
│  │  │ └────────┴──────────┴────────────┴─────────────┴───────────────┘ │  │  │
│  │  └──────────────────────────────────────────────────────────────────┘  │  │
│  └────────────────────────────────────────────────────────────────────────┘  │
│                                                                              │
│  ┌────────────────────────────────────────────────────────────────────────┐  │
│  │                    main (AnimatePresence + motion.div)                  │  │
│  │  ┌──────────────────────────────────────────────────────────────────┐  │  │
│  │  │                                                                   │  │  │
│  │  │                     renderContent()                              │  │  │
│  │  │                                                                   │  │  │
│  │  │   根据 currentView 切换不同页面内容:                              │  │  │
│  │  │   • providers  → ProviderList                                    │  │  │
│  │  │   • skills     → SkillsPageNew                                   │  │  │
│  │  │   • commands   → CommandsPage                                    │  │  │
│  │  │   • agents     → AgentsPage                                      │  │  │
│  │  │   • hooks      → HooksPage                                       │  │  │
│  │  │   • prompts    → PromptPanel                                     │  │  │
│  │  │   • mcp        → UnifiedMcpPanel                                 │  │  │
│  │  │   • settings   → SettingsPage                                    │  │  │
│  │  │                                                                   │  │  │
│  │  └──────────────────────────────────────────────────────────────────┘  │  │
│  └────────────────────────────────────────────────────────────────────────┘  │
│                                                                              │
│  ┌────────────────────────────────────────────────────────────────────────┐  │
│  │                      UsageFooter (可选，使用统计)                       │  │
│  │   📊 今日: 1,234 tokens | 💰 $0.05 | 📈 查看详情                       │  │
│  └────────────────────────────────────────────────────────────────────────┘  │
│                                                                              │
└──────────────────────────────────────────────────────────────────────────────┘
```

---

## 2. Providers 页面

默认视图，展示所有配置的 API 提供商。

```
┌──────────────────────────────────────────────────────────────────────────────┐
│                              ContentContainer                                 │
│  ┌────────────────────────────────────────────────────────────────────────┐  │
│  │ 🔍 搜索 Provider...                                      ┌─────────┐  │  │
│  │ [━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━]         │  ✕ 清除  │  │  │
│  └────────────────────────────────────────────────────────────────────────┘  │
│                                                                              │
│  ┌────────────────────────────────────────────────────────────────────────┐  │
│  │                        DndContext (拖拽排序)                            │  │
│  │  ┌──────────────────────────────────────────────────────────────────┐  │  │
│  │  │                     ProviderCard #1  ★ 当前                      │  │  │
│  │  │  ┌────┐                                                          │  │  │
│  │  │  │ ≡  │  ┌────────────────────────────────────────────────────┐ │  │  │
│  │  │  │拖拽 │  │  🟢 Claude API (Official)                          │ │  │  │
│  │  │  └────┘  │  ├─ Base URL: https://api.anthropic.com            │ │  │  │
│  │  │          │  ├─ Model: claude-sonnet-4-20250514                  │ │  │  │
│  │  │          │  └─ API Key: sk-ant-...****                         │ │  │  │
│  │  │          ├──────────────────────────────────────────────────────┤ │  │  │
│  │  │          │ 🏷️ 故障转移: #1 │ 🟢 健康 │ 📊 使用: 1.2M tokens     │ │  │  │
│  │  │          └────────────────────────────────────────────────────────┤ │  │  │
│  │  │                                           ┌─────────────────────┐│ │  │  │
│  │  │                                           │ ⋮ 菜单              ││ │  │  │
│  │  │                                           │ ├─ 🔄 切换          ││ │  │  │
│  │  │                                           │ ├─ ✏️ 编辑          ││ │  │  │
│  │  │                                           │ ├─ 📋 复制          ││ │  │  │
│  │  │                                           │ ├─ 🌐 打开网站      ││ │  │  │
│  │  │                                           │ ├─ 📊 配置统计      ││ │  │  │
│  │  │                                           │ └─ 🗑️ 删除          ││ │  │  │
│  │  │                                           └─────────────────────┘│ │  │  │
│  │  └──────────────────────────────────────────────────────────────────┘  │  │
│  │                                                                         │  │
│  │  ┌──────────────────────────────────────────────────────────────────┐  │  │
│  │  │                     ProviderCard #2                              │  │  │
│  │  │  ┌────┐                                                          │  │  │
│  │  │  │ ≡  │  ┌────────────────────────────────────────────────────┐ │  │  │
│  │  │  └────┘  │  ⚪ OpenRouter (Fallback)                           │ │  │  │
│  │  │          │  ├─ Base URL: https://openrouter.ai/api/v1         │ │  │  │
│  │  │          │  └─ Model: anthropic/claude-3.5-sonnet             │ │  │  │
│  │  │          ├──────────────────────────────────────────────────────┤ │  │  │
│  │  │          │ 🏷️ 故障转移: #2 │ 🟡 待检 │                          │ │  │  │
│  │  └──────────────────────────────────────────────────────────────────┘  │  │
│  │                                                                         │  │
│  │  ┌──────────────────────────────────────────────────────────────────┐  │  │
│  │  │                     ProviderCard #3                              │  │  │
│  │  │          │  ⚪ Bedrock Claude                                    │ │  │  │
│  │  │          │  ├─ Region: us-east-1                                 │ │  │  │
│  │  │          │  └─ Model: anthropic.claude-v2                        │ │  │  │
│  │  └──────────────────────────────────────────────────────────────────┘  │  │
│  │                                                                         │  │
│  │                              ... 更多卡片 ...                           │  │
│  └────────────────────────────────────────────────────────────────────────┘  │
│                                                                              │
│  ┌────────────────────────────────────────────────────────────────────────┐  │
│  │                   ProviderEmptyState (无提供商时)                       │  │
│  │                                                                         │  │
│  │                         📭 暂无提供商配置                                │  │
│  │                                                                         │  │
│  │                   点击右上角 + 按钮添加第一个提供商                       │  │
│  │                                                                         │  │
│  └────────────────────────────────────────────────────────────────────────┘  │
└──────────────────────────────────────────────────────────────────────────────┘
```

---

## 3. Skills 页面

三栏布局，支持 List / Discovery / Import 三种视图模式。

```
┌──────────────────────────────────────────────────────────────────────────────┐
│                              SkillsPageNew                                    │
│  ┌────────────────────────────────────────────────────────────────────────┐  │
│  │ 顶部控制栏                                                              │  │
│  │ ┌─────────────────────┐ ┌──────────────────────────────────────────┐   │  │
│  │ │ [List][Discovery][Import] │ │ 🔍 搜索技能...                       │   │  │
│  │ └─────────────────────┘ └──────────────────────────────────────────┘   │  │
│  │ ┌────────────┐ ┌──────────┐ ┌──────┐ ┌────────────┐ ┌───────────────┐ │  │
│  │ │ 📥 已安装 ▼ │ │ 🔄 刷新   │ │ 批量 │ │ 🔍 检查更新 │ │ 📂 Repo 管理  │ │  │
│  │ └────────────┘ └──────────┘ └──────┘ └────────────┘ └───────────────┘ │  │
│  └────────────────────────────────────────────────────────────────────────┘  │
│                                                                              │
│  ┌──────────────────────────────────────────────────────────────────────┐    │
│  │                         三栏布局容器                                   │    │
│  │ ┌────────────┐ ┌────────────────────────────┐ ┌────────────────────┐ │    │
│  │ │ 左栏 (200px)│ │     中栏 (flex-1)          │ │ 右栏 (300px，可选) │ │    │
│  │ │            │ │                            │ │                    │ │    │
│  │ │ Namespace  │ │   GroupedSkillsList        │ │  SkillDetailPanel  │ │    │
│  │ │ Tree       │ │                            │ │                    │ │    │
│  │ │            │ │ ┌────────────────────────┐ │ │ ┌────────────────┐ │ │    │
│  │ │ 📂 All     │ │ │ 📁 anthropic-official  │ │ │ │ 📝 commit      │ │ │    │
│  │ │ ├─📂anthr  │ │ ├──────────────────────────┤ │ │ ├──────────────┤ │ │    │
│  │ │ │ ├─📄comm │ │ │ 📄 commit               │ │ │ │ v1.2.0       │ │ │    │
│  │ │ │ └─📄pr-r │ │ │ ├─ v1.2.0 🟢 已安装     │ │ │ │ ┌──────────┐ │ │ │    │
│  │ │ ├─📂commun │ │ │ ├─ 🌐 全局安装          │ │ │ │ │ 📝 描述   │ │ │ │    │
│  │ │ │ └─📄...  │ │ │ └─ [Claude][Codex][ ]   │ │ │ │ │ 生成规范  │ │ │ │    │
│  │ │ └─📂custom │ │ ├──────────────────────────┤ │ │ │ │ 的 commit │ │ │ │    │
│  │ │            │ │ │ 📄 pr-review            │ │ │ │ │ 消息...   │ │ │ │    │
│  │ │ ☑ 全选    │ │ │ ├─ v2.0.1 🔄 有更新     │ │ │ │ └──────────┘ │ │ │    │
│  │ │ ☐ 无      │ │ │ └─ 📁 项目级安装         │ │ │ │              │ │ │    │
│  │ │ ○ 自定义  │ │ └────────────────────────────┘ │ │ │ ┌──────────┐ │ │ │    │
│  │ │            │ │                            │ │ │ │ App 开关  │ │ │ │    │
│  │ │ [安装选中] │ │ ┌────────────────────────┐ │ │ │ │ [✓][✓][ ] │ │ │ │    │
│  │ │            │ │ │ 📁 community            │ │ │ │ └──────────┘ │ │ │    │
│  │ │            │ │ ├──────────────────────────┤ │ │ │              │ │ │    │
│  │ │            │ │ │ 📄 docgen               │ │ │ │ [🗑️ 卸载]   │ │ │    │
│  │ │            │ │ │ ├─ v1.0.0               │ │ │ └────────────────┘ │ │    │
│  │ │            │ │ │ └─ ⚪ 未安装             │ │ │                    │ │    │
│  │ │            │ │ └────────────────────────────┘ │ │                    │ │    │
│  │ │            │ │                            │ │                    │ │    │
│  │ └────────────┘ └────────────────────────────┘ └────────────────────┘ │    │
│  └──────────────────────────────────────────────────────────────────────┘    │
│                                                                              │
│  ┌────────────────────────────────────────────────────────────────────────┐  │
│  │              冲突检测面板 (SkillConflictPanel, 条件渲染)                │  │
│  │  ⚠️ 检测到冲突: commit 在 anthropic 和 community 仓库中都存在           │  │
│  └────────────────────────────────────────────────────────────────────────┘  │
└──────────────────────────────────────────────────────────────────────────────┘
```

### Discovery 模式

```
┌─────────────────────────────── Discovery 模式 ─────────────────────────────┐
│  SkillDiscoveryTree                                                         │
│  ┌────────────────────────────────────────────────────────────────────────┐ │
│  │ 📂 GitHub Repositories                                                  │ │
│  │ ├─ 📦 anthropic/claude-skills (official)                               │ │
│  │ │   ├─ 📄 commit (v1.2.0)                     [安装]                   │ │
│  │ │   ├─ 📄 pr-review (v2.0.1)                  [安装]                   │ │
│  │ │   └─ 📄 code-review (v1.0.0)                [安装]                   │ │
│  │ ├─ 📦 community/awesome-skills                                         │ │
│  │ │   ├─ 📄 docgen (v1.0.0)                     [安装]                   │ │
│  │ │   └─ 📄 test-helper (v0.9.0)                [安装]                   │ │
│  │ └─ 📦 custom-repo/my-skills                                            │ │
│  │     └─ 📄 my-custom-skill (v1.0.0)            [安装]                   │ │
│  └────────────────────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────────────────────┘
```

---

## 4. Commands 页面

三栏布局，管理斜杠命令。

```
┌──────────────────────────────────────────────────────────────────────────────┐
│                              CommandsPage                                     │
│  ┌────────────────────────────────────────────────────────────────────────┐  │
│  │ 顶部控制栏                                                              │  │
│  │ ┌───────────────────────┐ ┌────────────────────────────────────────┐   │  │
│  │ │ [List][Discovery][Import] │ │ 🔍 搜索命令...                       │   │  │
│  │ └───────────────────────┘ └────────────────────────────────────────┘   │  │
│  │ ┌──────┐ ┌──────────┐ ┌────────────┐ ┌───────────────┐                │  │
│  │ │ 🔄   │ │ 📥 批量  │ │ 🔍 检查更新 │ │ 📂 Repo 管理  │                │  │
│  │ └──────┘ └──────────┘ └────────────┘ └───────────────┘                │  │
│  └────────────────────────────────────────────────────────────────────────┘  │
│                                                                              │
│  ┌──────────────────────────────────────────────────────────────────────┐    │
│  │                         三栏布局容器                                   │    │
│  │ ┌────────────┐ ┌────────────────────────────┐ ┌────────────────────┐ │    │
│  │ │ 左栏       │ │     中栏                    │ │ 右栏               │ │    │
│  │ │            │ │                            │ │                    │ │    │
│  │ │ Command    │ │   GroupedCommandsList      │ │  CommandDetail     │ │    │
│  │ │ Namespace  │ │                            │ │  Panel             │ │    │
│  │ │ Tree       │ │ ┌────────────────────────┐ │ │                    │ │    │
│  │ │            │ │ │ 📁 built-in            │ │ │ ┌────────────────┐ │ │    │
│  │ │ 📂 All     │ │ ├──────────────────────────┤ │ │ │ /help         │ │ │    │
│  │ │ ├─📂built-in│ │ │ /help                   │ │ │ ├──────────────┤ │ │    │
│  │ │ ├─📂custom │ │ │ ├─ 显示帮助信息          │ │ │ │ 显示所有可   │ │ │    │
│  │ │ └─📂repo   │ │ │ ├─ ⚠️ 冲突检测          │ │ │ │ 用的命令和   │ │ │    │
│  │ │            │ │ │ └─ [✓Claude][✓Codex][ ] │ │ │ │ 选项说明     │ │ │    │
│  │ │            │ │ ├──────────────────────────┤ │ │ │              │ │ │    │
│  │ │            │ │ │ /clear                  │ │ │ │ ┌──────────┐ │ │ │    │
│  │ │            │ │ │ └─ 清除对话历史          │ │ │ │ │ 触发词   │ │ │ │    │
│  │ │            │ │ └────────────────────────────┘ │ │ │ │ /help   │ │ │ │    │
│  │ │            │ │                            │ │ │ │ │ /?      │ │ │ │    │
│  │ │            │ │ ┌────────────────────────┐ │ │ │ └──────────┘ │ │ │    │
│  │ │            │ │ │ 📁 custom               │ │ │ │              │ │ │    │
│  │ │            │ │ ├──────────────────────────┤ │ │ │ App 开关    │ │ │    │
│  │ │            │ │ │ /deploy                 │ │ │ │ [✓][✓][✓]   │ │ │    │
│  │ │            │ │ │ ├─ 部署到生产环境        │ │ │ └────────────────┘ │ │    │
│  │ │            │ │ │ └─ [✓][ ][ ]            │ │ │                    │ │    │
│  │ │            │ │ └────────────────────────────┘ │ │                    │ │    │
│  │ └────────────┘ └────────────────────────────┘ └────────────────────┘ │    │
│  └──────────────────────────────────────────────────────────────────────┘    │
│                                                                              │
│  ┌────────────────────────────────────────────────────────────────────────┐  │
│  │              ConflictDetectionPanel (冲突检测，条件渲染)                │  │
│  │  ⚠️ 命令冲突: /help 在多个来源中定义，当前优先使用 built-in 版本        │  │
│  └────────────────────────────────────────────────────────────────────────┘  │
└──────────────────────────────────────────────────────────────────────────────┘
```

---

## 5. Agents 页面

三栏布局，管理 AI Agents 配置。

```
┌──────────────────────────────────────────────────────────────────────────────┐
│                                AgentsPage                                     │
│  ┌────────────────────────────────────────────────────────────────────────┐  │
│  │ 顶部控制栏                                                              │  │
│  │ ┌───────────────────────┐ ┌────────────────────────────────────────┐   │  │
│  │ │ [List][Discovery][Import] │ │ 🔍 搜索 Agent...                     │   │  │
│  │ └───────────────────────┘ └────────────────────────────────────────┘   │  │
│  │ ┌──────┐ ┌──────────┐ ┌────────────┐ ┌───────────────┐ ┌──────────┐  │  │
│  │ │ 🔄   │ │ 📥 批量  │ │ 🔍 检查更新 │ │ 📂 Repo 管理  │ │ ⋮ 更多   │  │  │
│  │ └──────┘ └──────────┘ └────────────┘ └───────────────┘ └──────────┘  │  │
│  └────────────────────────────────────────────────────────────────────────┘  │
│                                                                              │
│  ┌──────────────────────────────────────────────────────────────────────┐    │
│  │                         三栏布局容器                                   │    │
│  │ ┌────────────┐ ┌────────────────────────────┐ ┌────────────────────┐ │    │
│  │ │ 左栏       │ │     中栏                    │ │ 右栏               │ │    │
│  │ │            │ │                            │ │                    │ │    │
│  │ │ Agent      │ │   GroupedAgentsList        │ │  Agent 详情        │ │    │
│  │ │ Namespace  │ │                            │ │                    │ │    │
│  │ │ Tree       │ │ ┌────────────────────────┐ │ │ ┌────────────────┐ │ │    │
│  │ │            │ │ │ 📁 code-assistants     │ │ │ │ 🤖 code-review │ │ │    │
│  │ │ 📂 All     │ │ ├──────────────────────────┤ │ │ ├──────────────┤ │ │    │
│  │ │ ├─📂code-a │ │ │ 🤖 code-review          │ │ │ │ v2.1.0       │ │ │    │
│  │ │ ├─📂data-a │ │ │ ├─ v2.1.0 🟢 已安装     │ │ │ │              │ │ │    │
│  │ │ └─📂custom │ │ │ ├─ 🌐 全局              │ │ │ │ ┌──────────┐ │ │ │    │
│  │ │            │ │ │ └─ 专业代码审查 Agent    │ │ │ │ │ 系统提示  │ │ │ │    │
│  │ │            │ │ ├──────────────────────────┤ │ │ │ │ 你是一个  │ │ │ │    │
│  │ │            │ │ │ 🤖 refactor-helper      │ │ │ │ │ 专业的代  │ │ │ │    │
│  │ │            │ │ │ ├─ v1.5.0 🔄 有更新     │ │ │ │ │ 码审查专  │ │ │ │    │
│  │ │            │ │ │ └─ 重构建议 Agent        │ │ │ │ │ 家...     │ │ │ │    │
│  │ │            │ │ └────────────────────────────┘ │ │ └──────────┘ │ │ │    │
│  │ │            │ │                            │ │ │              │ │ │    │
│  │ │            │ │ ┌────────────────────────┐ │ │ │ ┌──────────┐ │ │ │    │
│  │ │            │ │ │ 📁 data-analysis       │ │ │ │ │ 触发条件  │ │ │ │    │
│  │ │            │ │ ├──────────────────────────┤ │ │ │ │ 当检测到 │ │ │ │    │
│  │ │            │ │ │ 🤖 sql-helper          │ │ │ │ │ PR 或 MR  │ │ │ │    │
│  │ │            │ │ │ └─ SQL 查询优化 Agent   │ │ │ │ │ 时自动激  │ │ │ │    │
│  │ │            │ │ └────────────────────────────┘ │ │ │ 活       │ │ │ │    │
│  │ │            │ │                            │ │ │ └──────────┘ │ │ │    │
│  │ │            │ │                            │ │ │              │ │ │    │
│  │ │            │ │                            │ │ │ [🗑️ 卸载]   │ │ │    │
│  │ └────────────┘ └────────────────────────────┘ └────────────────────┘ │    │
│  └──────────────────────────────────────────────────────────────────────┘    │
│                                                                              │
│  ┌────────────────────────────────────────────────────────────────────────┐  │
│  │                   InstallScopeDialog (安装范围对话框)                   │  │
│  │  ┌──────────────────────────────────────────────────────────────────┐  │  │
│  │  │ 选择安装范围:                                                     │  │  │
│  │  │ ○ 🌐 全局安装 - 所有项目可用                                      │  │  │
│  │  │ ○ 📁 项目级安装 - 仅当前项目                                      │  │  │
│  │  │ ┌────────────────────────────────────────────────────────────┐   │  │  │
│  │  │ │ 选择项目目录...                                    [浏览]  │   │  │  │
│  │  │ └────────────────────────────────────────────────────────────┘   │  │  │
│  │  │                                             [取消]  [确认安装]   │  │  │
│  │  └──────────────────────────────────────────────────────────────────┘  │  │
│  └────────────────────────────────────────────────────────────────────────┘  │
└──────────────────────────────────────────────────────────────────────────────┘
```

---

## 6. Hooks 页面

双栏布局，管理事件钩子。

```
┌──────────────────────────────────────────────────────────────────────────────┐
│                                HooksPage                                      │
│  ┌────────────────────────────────────────────────────────────────────────┐  │
│  │ 顶部控制栏                                                              │  │
│  │ ┌───────────────────────┐ ┌────────────────────────────────────────┐   │  │
│  │ │ [List] [Discovery]    │ │ 🔍 搜索 Hook...                         │   │  │
│  │ └───────────────────────┘ └────────────────────────────────────────┘   │  │
│  │ ┌──────────────────┐ ┌──────┐ ┌──────────┐                            │  │
│  │ │ 事件类型: [全部▼] │ │ 🔄   │ │ 📂 Repo  │                            │  │
│  │ │ ├─ PreToolCall    │ └──────┘ └──────────┘                            │  │
│  │ │ ├─ PostToolCall   │                                                  │  │
│  │ │ ├─ PreCommit      │                                                  │  │
│  │ │ └─ PostCommit     │                                                  │  │
│  │ └──────────────────┘                                                   │  │
│  └────────────────────────────────────────────────────────────────────────┘  │
│                                                                              │
│  ┌──────────────────────────────────────────────────────────────────────┐    │
│  │                         双栏布局容器                                   │    │
│  │ ┌──────────────────┐ ┌──────────────────────────────────────────────┐│    │
│  │ │ 左栏 (命名空间树) │ │ 右栏 (HooksList)                             ││    │
│  │ │                  │ │                                              ││    │
│  │ │ HookNamespace    │ │ ┌──────────────────────────────────────────┐ ││    │
│  │ │ Tree             │ │ │ 🔗 pre-commit-lint                       │ ││    │
│  │ │                  │ │ │ ├─ 事件: PreCommit                        │ ││    │
│  │ │ 📂 All           │ │ │ ├─ 描述: 提交前运行 ESLint 检查           │ ││    │
│  │ │ ├─📂pre-commit   │ │ │ ├─ 脚本: npx eslint --fix .              │ ││    │
│  │ │ │ ├─📄lint       │ │ │ └─ App: [✓Claude][✓Codex][ Gemini]       │ ││    │
│  │ │ │ └─📄format     │ │ ├──────────────────────────────────────────┤ ││    │
│  │ │ ├─📂post-commit  │ │ │ 🔗 pre-commit-format                     │ ││    │
│  │ │ │ └─📄notify     │ │ │ ├─ 事件: PreCommit                        │ ││    │
│  │ │ └─📂tool-call    │ │ │ ├─ 描述: 提交前运行 Prettier 格式化       │ ││    │
│  │ │   ├─📄log        │ │ │ └─ App: [✓][✓][✓]                        │ ││    │
│  │ │   └─📄validate   │ │ ├──────────────────────────────────────────┤ ││    │
│  │ │                  │ │ │ 🔗 post-commit-notify                    │ ││    │
│  │ │                  │ │ │ ├─ 事件: PostCommit                       │ ││    │
│  │ │                  │ │ │ ├─ 描述: 提交后发送通知                    │ ││    │
│  │ │                  │ │ │ └─ App: [ ][ ][✓]                        │ ││    │
│  │ │                  │ │ ├──────────────────────────────────────────┤ ││    │
│  │ │                  │ │ │ 🔗 tool-call-logger                      │ ││    │
│  │ │                  │ │ │ ├─ 事件: PostToolCall                     │ ││    │
│  │ │                  │ │ │ ├─ 描述: 记录所有工具调用日志              │ ││    │
│  │ │                  │ │ │ └─ App: [✓][✓][✓]                        │ ││    │
│  │ │                  │ │ └──────────────────────────────────────────┘ ││    │
│  │ └──────────────────┘ └──────────────────────────────────────────────┘│    │
│  └──────────────────────────────────────────────────────────────────────┘    │
└──────────────────────────────────────────────────────────────────────────────┘
```

---

## 7. MCP 页面

MCP (Model Context Protocol) 服务器管理。

```
┌──────────────────────────────────────────────────────────────────────────────┐
│                              UnifiedMcpPanel                                  │
│  ┌────────────────────────────────────────────────────────────────────────┐  │
│  │ 顶部操作栏                                                              │  │
│  │ ┌────────────┐ ┌────────────┐ ┌──────┐                                 │  │
│  │ │ ➕ 新建    │ │ 📥 导入    │ │ 🔄   │                                 │  │
│  │ └────────────┘ └────────────┘ └──────┘                                 │  │
│  └────────────────────────────────────────────────────────────────────────┘  │
│                                                                              │
│  ┌────────────────────────────────────────────────────────────────────────┐  │
│  │                         MCP 服务器列表                                  │  │
│  │ ┌──────────────────────────────────────────────────────────────────┐   │  │
│  │ │ 🖥️ filesystem                                                    │   │  │
│  │ │ ├─ 命令: npx -y @anthropic-ai/mcp-server-filesystem             │   │  │
│  │ │ ├─ 参数: /Users/office/Documents                                 │   │  │
│  │ │ ├─ 状态: 🟢 已启用                                               │   │  │
│  │ │ └─ App: [✓ Claude][✓ Codex][ Gemini]                            │   │  │
│  │ │                                              [✏️ 编辑] [🗑️ 删除] │   │  │
│  │ ├──────────────────────────────────────────────────────────────────┤   │  │
│  │ │ 🖥️ github                                                        │   │  │
│  │ │ ├─ 命令: npx -y @anthropic-ai/mcp-server-github                 │   │  │
│  │ │ ├─ 环境变量: GITHUB_TOKEN=***                                    │   │  │
│  │ │ └─ App: [✓][✓][✓]                                               │   │  │
│  │ │                                              [✏️ 编辑] [🗑️ 删除] │   │  │
│  │ ├──────────────────────────────────────────────────────────────────┤   │  │
│  │ │ 🖥️ postgres                                                      │   │  │
│  │ │ ├─ 命令: npx -y @anthropic-ai/mcp-server-postgres               │   │  │
│  │ │ ├─ 环境变量: DATABASE_URL=***                                    │   │  │
│  │ │ └─ App: [✓][ ][ ]                                               │   │  │
│  │ │                                              [✏️ 编辑] [🗑️ 删除] │   │  │
│  │ ├──────────────────────────────────────────────────────────────────┤   │  │
│  │ │ 🖥️ brave-search (SSE)                                           │   │  │
│  │ │ ├─ URL: https://mcp.brave.com/sse                                │   │  │
│  │ │ └─ App: [✓][✓][ ]                                               │   │  │
│  │ │                                              [✏️ 编辑] [🗑️ 删除] │   │  │
│  │ └──────────────────────────────────────────────────────────────────┘   │  │
│  └────────────────────────────────────────────────────────────────────────┘  │
│                                                                              │
│  ┌─────────────────────── McpFormModal (新建/编辑) ───────────────────────┐  │
│  │ ┌──────────────────────────────────────────────────────────────────┐   │  │
│  │ │ 📝 新建 MCP 服务器                                                │   │  │
│  │ ├──────────────────────────────────────────────────────────────────┤   │  │
│  │ │ 预设选择:                                                         │   │  │
│  │ │ ┌──────────────────────────────────────────────────────────────┐ │   │  │
│  │ │ │ [filesystem][github][postgres][brave][custom...]              │ │   │  │
│  │ │ └──────────────────────────────────────────────────────────────┘ │   │  │
│  │ │                                                                   │   │  │
│  │ │ 名称:     [━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━] │   │  │
│  │ │ 类型:     ○ stdio  ○ sse                                         │   │  │
│  │ │ 命令/URL: [━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━] │   │  │
│  │ │ 参数:     [━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━] │   │  │
│  │ │                                                                   │   │  │
│  │ │ 环境变量:                                                         │   │  │
│  │ │ ┌────────────────────────────────────────────────────────────┐   │   │  │
│  │ │ │ KEY                    │ VALUE                     [+ 添加] │   │   │  │
│  │ │ ├───────────────────────┼───────────────────────────────────┤   │   │  │
│  │ │ │ GITHUB_TOKEN          │ ghp_xxxx...                [🗑️]   │   │   │  │
│  │ │ └───────────────────────┴───────────────────────────────────┘   │   │  │
│  │ │                                                                   │   │  │
│  │ │ 应用到:  [✓ Claude] [✓ Codex] [ Gemini]                          │   │  │
│  │ │                                                                   │   │  │
│  │ │                        [🔍 验证] [取消] [💾 保存]                 │   │  │
│  │ └──────────────────────────────────────────────────────────────────┘   │  │
│  └────────────────────────────────────────────────────────────────────────┘  │
└──────────────────────────────────────────────────────────────────────────────┘
```

---

## 8. Prompts 页面

系统提示词管理。

```
┌──────────────────────────────────────────────────────────────────────────────┐
│                               PromptPanel                                     │
│  ┌────────────────────────────────────────────────────────────────────────┐  │
│  │ 顶部操作栏                                                              │  │
│  │ ┌────────────┐ ┌──────┐                                                │  │
│  │ │ ➕ 新建    │ │ 🔄   │                                                │  │
│  │ └────────────┘ └──────┘                                                │  │
│  └────────────────────────────────────────────────────────────────────────┘  │
│                                                                              │
│  ┌────────────────────────────────────────────────────────────────────────┐  │
│  │                         Prompt 列表                                     │  │
│  │ ┌──────────────────────────────────────────────────────────────────┐   │  │
│  │ │ 📝 专业代码审查员                                                 │   │  │
│  │ │ ├─ 描述: 你是一位资深的代码审查专家，擅长发现潜在问题...          │   │  │
│  │ │ ├─ 创建时间: 2024-01-15                                          │   │  │
│  │ │ └─ App: [✓ Claude 🟢][✓ Codex 🟢][ Gemini]                       │   │  │
│  │ │                                              [✏️ 编辑] [🗑️ 删除] │   │  │
│  │ ├──────────────────────────────────────────────────────────────────┤   │  │
│  │ │ 📝 技术文档撰写者                                                 │   │  │
│  │ │ ├─ 描述: 你是一位技术文档专家，能够将复杂概念简化...              │   │  │
│  │ │ └─ App: [✓][✓][✓]                                               │   │  │
│  │ │                                              [✏️ 编辑] [🗑️ 删除] │   │  │
│  │ ├──────────────────────────────────────────────────────────────────┤   │  │
│  │ │ 📝 SQL 优化专家                                                   │   │  │
│  │ │ ├─ 描述: 你是 PostgreSQL 和 MySQL 数据库优化专家...               │   │  │
│  │ │ └─ App: [ ][✓][ ]                                               │   │  │
│  │ │                                              [✏️ 编辑] [🗑️ 删除] │   │  │
│  │ └──────────────────────────────────────────────────────────────────┘   │  │
│  └────────────────────────────────────────────────────────────────────────┘  │
│                                                                              │
│  ┌───────────────────── PromptFormPanel (编辑/新建) ─────────────────────┐  │
│  │ ┌──────────────────────────────────────────────────────────────────┐   │  │
│  │ │ 📝 编辑 Prompt                                                    │   │  │
│  │ ├──────────────────────────────────────────────────────────────────┤   │  │
│  │ │ 名称:                                                             │   │  │
│  │ │ ┌──────────────────────────────────────────────────────────────┐ │   │  │
│  │ │ │ 专业代码审查员                                                 │ │   │  │
│  │ │ └──────────────────────────────────────────────────────────────┘ │   │  │
│  │ │                                                                   │   │  │
│  │ │ 内容 (Markdown):                                                  │   │  │
│  │ │ ┌──────────────────────────────────────────────────────────────┐ │   │  │
│  │ │ │ # 代码审查专家                                                 │ │   │  │
│  │ │ │                                                                │ │   │  │
│  │ │ │ 你是一位资深的软件工程师和代码审查专家。                        │ │   │  │
│  │ │ │                                                                │ │   │  │
│  │ │ │ ## 你的职责                                                    │ │   │  │
│  │ │ │ - 发现代码中的潜在 bug                                         │ │   │  │
│  │ │ │ - 提出性能优化建议                                             │ │   │  │
│  │ │ │ - 检查安全漏洞                                                 │ │   │  │
│  │ │ │ - 确保代码符合最佳实践                                         │ │   │  │
│  │ │ │ ...                                                            │ │   │  │
│  │ │ └──────────────────────────────────────────────────────────────┘ │   │  │
│  │ │                                                                   │   │  │
│  │ │ 应用到:  [✓ Claude] [✓ Codex] [ Gemini]                          │   │  │
│  │ │                                                                   │   │  │
│  │ │                                       [取消] [💾 保存]            │   │  │
│  │ └──────────────────────────────────────────────────────────────────┘   │  │
│  └────────────────────────────────────────────────────────────────────────┘  │
└──────────────────────────────────────────────────────────────────────────────┘
```

---

## 9. Settings 页面

全局设置对话框，使用 Accordion 手风琴布局。

```
┌──────────────────────────────────────────────────────────────────────────────┐
│                              SettingsPage (Dialog)                            │
│  ┌────────────────────────────────────────────────────────────────────────┐  │
│  │ ⚙️ 设置                                                         [✕]   │  │
│  ├────────────────────────────────────────────────────────────────────────┤  │
│  │                                                                         │  │
│  │ ┌──────────────────────────── Accordion ────────────────────────────┐  │  │
│  │ │                                                                    │  │  │
│  │ │ ┌── 🌐 语言设置 ──────────────────────────────────────────── ▼ ─┐ │  │  │
│  │ │ │  选择语言:                                                     │ │  │  │
│  │ │ │  ┌─────────────────────────────────────────────────────────┐  │ │  │  │
│  │ │ │  │ ● 简体中文  ○ English  ○ 日本語                          │  │ │  │  │
│  │ │ │  └─────────────────────────────────────────────────────────┘  │ │  │  │
│  │ │ └────────────────────────────────────────────────────────────────┘ │  │  │
│  │ │                                                                    │  │  │
│  │ │ ┌── 🎨 主题设置 ──────────────────────────────────────────── ▼ ─┐ │  │  │
│  │ │ │  选择主题:                                                     │ │  │  │
│  │ │ │  ┌─────────────────────────────────────────────────────────┐  │ │  │  │
│  │ │ │  │ ● 跟随系统  ○ 浅色  ○ 深色                               │  │ │  │  │
│  │ │ │  └─────────────────────────────────────────────────────────┘  │ │  │  │
│  │ │ └────────────────────────────────────────────────────────────────┘ │  │  │
│  │ │                                                                    │  │  │
│  │ │ ┌── 🪟 窗口设置 ──────────────────────────────────────────── ▼ ─┐ │  │  │
│  │ │ │  ☑ 启动时显示窗口                                             │ │  │  │
│  │ │ │  ☑ 关闭时最小化到托盘                                          │ │  │  │
│  │ │ │  ☐ 始终置顶                                                    │ │  │  │
│  │ │ └────────────────────────────────────────────────────────────────┘ │  │  │
│  │ │                                                                    │  │  │
│  │ │ ┌── 📂 目录设置 ──────────────────────────────────────────── ▼ ─┐ │  │  │
│  │ │ │  数据目录: ~/.cc-switch                           [打开] [重置]│ │  │  │
│  │ │ └────────────────────────────────────────────────────────────────┘ │  │  │
│  │ │                                                                    │  │  │
│  │ │ ┌── 🔑 GitHub Token ──────────────────────────────────────── ▼ ─┐ │  │  │
│  │ │ │  GitHub Token:                                                 │ │  │  │
│  │ │ │  ┌─────────────────────────────────────────────────────────┐  │ │  │  │
│  │ │ │  │ ghp_xxxx...                          [👁️ 显示] [💾 保存] │  │ │  │  │
│  │ │ │  └─────────────────────────────────────────────────────────┘  │ │  │  │
│  │ │ │  用于访问私有 GitHub 仓库的技能和命令                          │ │  │  │
│  │ │ └────────────────────────────────────────────────────────────────┘ │  │  │
│  │ │                                                                    │  │  │
│  │ │ ┌── 🔌 代理配置 ──────────────────────────────────────────── ▼ ─┐ │  │  │
│  │ │ │  ┌────────────────────────────────────────────────────────┐   │ │  │  │
│  │ │ │  │ ProxyPanel                                              │   │ │  │  │
│  │ │ │  │ ┌──────────────────────────────────────────────────┐   │   │ │  │  │
│  │ │ │  │ │ 代理状态: [🟢 运行中 / 🔴 已停止]    [启动/停止] │   │   │ │  │  │
│  │ │ │  │ │ 监听端口: 8765                                    │   │   │ │  │  │
│  │ │ │  │ └──────────────────────────────────────────────────┘   │   │ │  │  │
│  │ │ │  └────────────────────────────────────────────────────────┘   │ │  │  │
│  │ │ │  ┌────────────────────────────────────────────────────────┐   │ │  │  │
│  │ │ │  │ AutoFailoverConfigPanel                                 │   │ │  │  │
│  │ │ │  │ ☑ 启用自动故障转移                                       │   │ │  │  │
│  │ │ │  │ 健康检查间隔: [30] 秒                                    │   │ │  │  │
│  │ │ │  │ 失败阈值: [3] 次                                         │   │ │  │  │
│  │ │ │  └────────────────────────────────────────────────────────┘   │ │  │  │
│  │ │ │  ┌────────────────────────────────────────────────────────┐   │ │  │  │
│  │ │ │  │ FailoverQueueManager (故障转移队列)                      │   │ │  │  │
│  │ │ │  │ #1 Claude API (Official)  🟢                            │   │ │  │  │
│  │ │ │  │ #2 OpenRouter             🟡                            │   │ │  │  │
│  │ │ │  │ #3 Bedrock                🔴                            │   │ │  │  │
│  │ │ │  └────────────────────────────────────────────────────────┘   │ │  │  │
│  │ │ └────────────────────────────────────────────────────────────────┘ │  │  │
│  │ │                                                                    │  │  │
│  │ │ ┌── 📊 使用统计配置 ──────────────────────────────────────── ▼ ─┐ │  │  │
│  │ │ │  ┌────────────────────────────────────────────────────────┐   │ │  │  │
│  │ │ │  │ PricingConfigPanel                                      │   │ │  │  │
│  │ │ │  │ 配置各模型的价格 ($/1M tokens)                           │   │ │  │  │
│  │ │ │  │ ┌─────────────┬──────────┬──────────┐                   │   │ │  │  │
│  │ │ │  │ │ Model       │ Input    │ Output   │                   │   │ │  │  │
│  │ │ │  │ ├─────────────┼──────────┼──────────┤                   │   │ │  │  │
│  │ │ │  │ │ claude-3.5  │ $3.00    │ $15.00   │                   │   │ │  │  │
│  │ │ │  │ │ claude-3    │ $8.00    │ $24.00   │                   │   │ │  │  │
│  │ │ │  │ └─────────────┴──────────┴──────────┘                   │   │ │  │  │
│  │ │ │  └────────────────────────────────────────────────────────┘   │ │  │  │
│  │ │ └────────────────────────────────────────────────────────────────┘ │  │  │
│  │ │                                                                    │  │  │
│  │ │ ┌── 📦 导入/导出配置 ──────────────────────────────────────── ▼ ─┐ │  │  │
│  │ │ │  ┌─────────────────────┐  ┌─────────────────────┐             │ │  │  │
│  │ │ │  │ 📤 导出全部配置     │  │ 📥 导入配置文件     │             │ │  │  │
│  │ │ │  └─────────────────────┘  └─────────────────────┘             │ │  │  │
│  │ │ └────────────────────────────────────────────────────────────────┘ │  │  │
│  │ │                                                                    │  │  │
│  │ │ ┌── ℹ️ 关于应用 ──────────────────────────────────────────── ▼ ─┐ │  │  │
│  │ │ │  CC Switch v1.0.0                                              │ │  │  │
│  │ │ │  一站式管理 Claude Code, Codex CLI, Gemini CLI 配置             │ │  │  │
│  │ │ │  © 2024 CC Switch Team                                         │ │  │  │
│  │ │ │  [GitHub] [文档] [检查更新]                                     │ │  │  │
│  │ │ └────────────────────────────────────────────────────────────────┘ │  │  │
│  │ │                                                                    │  │  │
│  │ └────────────────────────────────────────────────────────────────────┘  │  │
│  └────────────────────────────────────────────────────────────────────────┘  │
└──────────────────────────────────────────────────────────────────────────────┘
```

---

## 10. 对话框组件

### AddProviderDialog / EditProviderDialog

```
┌──────────────────────────────────────────────────────────────────────────────┐
│                      AddProviderDialog / EditProviderDialog                   │
│  ┌────────────────────────────────────────────────────────────────────────┐  │
│  │ ➕ 添加提供商 / ✏️ 编辑提供商                                    [✕]   │  │
│  ├────────────────────────────────────────────────────────────────────────┤  │
│  │                                                                         │  │
│  │ 预设选择 (ProviderPresetSelector):                                      │  │
│  │ ┌──────────────────────────────────────────────────────────────────┐   │  │
│  │ │ [Claude API][OpenRouter][Bedrock][VertexAI][Azure][自定义...]     │   │  │
│  │ └──────────────────────────────────────────────────────────────────┘   │  │
│  │                                                                         │  │
│  │ 名称:                                                                   │  │
│  │ ┌──────────────────────────────────────────────────────────────────┐   │  │
│  │ │ My Claude Provider                                                │   │  │
│  │ └──────────────────────────────────────────────────────────────────┘   │  │
│  │                                                                         │  │
│  │ API Key (ApiKeyInput):                                                  │  │
│  │ ┌──────────────────────────────────────────────────────────────────┐   │  │
│  │ │ sk-ant-api03-...                                  [👁️] [📋 粘贴] │   │  │
│  │ └──────────────────────────────────────────────────────────────────┘   │  │
│  │ ⚠️ 关联: 此 Key 已与 "Work Account" 提供商关联                         │  │
│  │                                                                         │  │
│  │ Base URL:                                                               │  │
│  │ ┌──────────────────────────────────────────────────────────────────┐   │  │
│  │ │ https://api.anthropic.com                                         │   │  │
│  │ └──────────────────────────────────────────────────────────────────┘   │  │
│  │                                                                         │  │
│  │ 模型:                                                                   │  │
│  │ ┌──────────────────────────────────────────────────────────────────┐   │  │
│  │ │ claude-sonnet-4-20250514                                     [▼] │   │  │
│  │ │ ├─ claude-sonnet-4-20250514 (推荐)                               │   │  │
│  │ │ ├─ claude-opus-4-20250514                                        │   │  │
│  │ │ ├─ claude-3-5-sonnet-20241022                                    │   │  │
│  │ │ └─ claude-3-5-haiku-20241022                                     │   │  │
│  │ └──────────────────────────────────────────────────────────────────┘   │  │
│  │                                                                         │  │
│  │ ┌────────────────────────────────────────────────────────────────────┐ │  │
│  │ │ EndpointSpeedTest (端点速度测试)                                   │ │  │
│  │ │ ┌────────────────────────────────────────────────────────────────┐│ │  │
│  │ │ │ 🚀 测试端点延迟                                    [开始测试] ││ │  │
│  │ │ │ 结果: api.anthropic.com - 156ms 🟢                           ││ │  │
│  │ │ └────────────────────────────────────────────────────────────────┘│ │  │
│  │ └────────────────────────────────────────────────────────────────────┘ │  │
│  │                                                                         │  │
│  │ ┌──────────── 提供商特定配置 (根据类型切换) ────────────────────────┐ │  │
│  │ │                                                                    │ │  │
│  │ │ [Claude 专用配置]                                                 │ │  │
│  │ │ ├─ 思考预算: [━━━━━━━━━━━━━━━] 10240 tokens                       │ │  │
│  │ │ └─ ☐ 启用思考模式                                                 │ │  │
│  │ │                                                                    │ │  │
│  │ │ [Codex 专用配置 - CodexConfigEditor]                              │ │  │
│  │ │ ├─ config.toml 配置编辑器                                         │ │  │
│  │ │ └─ [打开 CommonConfigEditor]                                      │ │  │
│  │ │                                                                    │ │  │
│  │ │ [Gemini 专用配置 - GeminiConfigEditor]                            │ │  │
│  │ │ ├─ .env 配置编辑器                                                │ │  │
│  │ │ └─ [打开 GeminiCommonConfigModal]                                 │ │  │
│  │ │                                                                    │ │  │
│  │ └────────────────────────────────────────────────────────────────────┘ │  │
│  │                                                                         │  │
│  │ ☐ 作为故障转移备选 (启用代理时可用)                                     │  │
│  │                                                                         │  │
│  │                                          [取消]  [💾 保存]              │  │
│  └────────────────────────────────────────────────────────────────────────┘  │
└──────────────────────────────────────────────────────────────────────────────┘
```

---

## 11. DeepLinkImportDialog

处理从外部链接导入资源。

```
┌──────────────────────────────────────────────────────────────────────────────┐
│                           DeepLinkImportDialog                                │
│  ┌────────────────────────────────────────────────────────────────────────┐  │
│  │ 📥 导入确认                                                      [✕]   │  │
│  ├────────────────────────────────────────────────────────────────────────┤  │
│  │                                                                         │  │
│  │ 检测到从外部链接导入的内容:                                              │  │
│  │                                                                         │  │
│  │ ┌──────────────────────────────────────────────────────────────────┐   │  │
│  │ │ 类型: 🔧 Skill                                                    │   │  │
│  │ │ 名称: commit                                                      │   │  │
│  │ │ 来源: anthropic/claude-skills                                     │   │  │
│  │ │ 版本: v1.2.0                                                      │   │  │
│  │ │                                                                   │   │  │
│  │ │ 描述:                                                             │   │  │
│  │ │ 生成规范的 Git commit 消息，遵循 Conventional Commits 规范。        │   │  │
│  │ │                                                                   │   │  │
│  │ │ 安装范围:                                                         │   │  │
│  │ │ ○ 🌐 全局安装                                                     │   │  │
│  │ │ ● 📁 项目级安装: /Users/office/my-project                        │   │  │
│  │ │                                                                   │   │  │
│  │ │ 应用到:                                                           │   │  │
│  │ │ [✓ Claude] [✓ Codex] [ Gemini]                                   │   │  │
│  │ └──────────────────────────────────────────────────────────────────┘   │  │
│  │                                                                         │  │
│  │ ⚠️ 请确认您信任此来源后再安装。                                         │  │
│  │                                                                         │  │
│  │                                          [取消]  [✅ 确认导入]           │  │
│  └────────────────────────────────────────────────────────────────────────┘  │
└──────────────────────────────────────────────────────────────────────────────┘
```

---

## 12. UsageDashboard

使用统计仪表板，支持多个 Tab 视图。

```
┌──────────────────────────────────────────────────────────────────────────────┐
│                              UsageDashboard                                   │
│  ┌────────────────────────────────────────────────────────────────────────┐  │
│  │ [📊 概览] [📋 请求日志] [📈 提供商统计] [🤖 模型统计]                    │  │
│  ├────────────────────────────────────────────────────────────────────────┤  │
│  │                                                                         │  │
│  │ ┌───────────────────────── 概览 Tab ─────────────────────────────────┐ │  │
│  │ │                                                                     │ │  │
│  │ │ ┌───────────────── UsageSummaryCards ─────────────────────────────┐│ │  │
│  │ │ │ ┌─────────────┐ ┌─────────────┐ ┌─────────────┐ ┌─────────────┐ ││ │  │
│  │ │ │ │ 📊 总请求   │ │ 🔤 总 Token │ │ 💰 总费用   │ │ ⏱️ 平均延迟 │ ││ │  │
│  │ │ │ │   1,234     │ │  2.5M       │ │  $12.50     │ │   156ms     │ ││ │  │
│  │ │ │ │ ▲ 12% 较昨日 │ │ ▲ 8%       │ │ ▼ 3%       │ │ ▼ 5%       │ ││ │  │
│  │ │ │ └─────────────┘ └─────────────┘ └─────────────┘ └─────────────┘ ││ │  │
│  │ │ └─────────────────────────────────────────────────────────────────┘│ │  │
│  │ │                                                                     │ │  │
│  │ │ ┌───────────────── UsageTrendChart ───────────────────────────────┐│ │  │
│  │ │ │                                                                  ││ │  │
│  │ │ │  ^                                                               ││ │  │
│  │ │ │  │     ╭─╮                                                       ││ │  │
│  │ │ │  │   ╭─╯ ╰─╮     ╭─╮                                            ││ │  │
│  │ │ │  │ ╭─╯     ╰─╮ ╭─╯ ╰─╮                                          ││ │  │
│  │ │ │  │╭╯         ╰─╯     ╰─────────╮                                ││ │  │
│  │ │ │  └────────────────────────────────────────────────────>          ││ │  │
│  │ │ │    1月  2月  3月  4月  5月  6月  7月                             ││ │  │
│  │ │ │                                                                  ││ │  │
│  │ │ │  图例: ── Input Tokens  ── Output Tokens  ── 费用               ││ │  │
│  │ │ └──────────────────────────────────────────────────────────────────┘│ │  │
│  │ └─────────────────────────────────────────────────────────────────────┘ │  │
│  │                                                                         │  │
│  │ ┌───────────────────── 请求日志 Tab ─────────────────────────────────┐ │  │
│  │ │ ┌───────────────── RequestLogTable ───────────────────────────────┐│ │  │
│  │ │ │ ┌──────────┬─────────────┬────────┬────────┬────────┬─────────┐ ││ │  │
│  │ │ │ │ 时间     │ 提供商       │ 模型   │ Input  │ Output │ 延迟    │ ││ │  │
│  │ │ │ ├──────────┼─────────────┼────────┼────────┼────────┼─────────┤ ││ │  │
│  │ │ │ │ 10:23:45 │ Claude API  │ sonnet │ 1,234  │ 567    │ 156ms   │ ││ │  │
│  │ │ │ │ 10:22:30 │ OpenRouter  │ sonnet │ 890    │ 234    │ 203ms   │ ││ │  │
│  │ │ │ │ 10:21:15 │ Claude API  │ haiku  │ 456    │ 123    │ 89ms    │ ││ │  │
│  │ │ │ │ ...      │ ...         │ ...    │ ...    │ ...    │ ...     │ ││ │  │
│  │ │ │ └──────────┴─────────────┴────────┴────────┴────────┴─────────┘ ││ │  │
│  │ │ │                                                                  ││ │  │
│  │ │ │ 点击行查看详情 (RequestDetailPanel)                               ││ │  │
│  │ │ └──────────────────────────────────────────────────────────────────┘│ │  │
│  │ └─────────────────────────────────────────────────────────────────────┘ │  │
│  │                                                                         │  │
│  └────────────────────────────────────────────────────────────────────────┘  │
└──────────────────────────────────────────────────────────────────────────────┘
```

---

## 13. 组件层级总览

```
App
├── 全局 Provider 层
│   ├── QueryClientProvider (TanStack Query)
│   ├── ThemeProvider (主题)
│   ├── TooltipProvider (Tooltip)
│   ├── UpdateProvider (更新检查)
│   └── AppUpdaterProvider (应用更新)
│
├── 全局 UI 层
│   ├── EnvWarningBanner (环境变量警告)
│   ├── UnifiedNavbar (三行导航栏)
│   └── Toaster (通知)
│
├── 主内容区 (AnimatePresence)
│   ├── providers  → ProviderList
│   ├── skills     → SkillsPageNew (三栏)
│   ├── commands   → CommandsPage (三栏)
│   ├── agents     → AgentsPage (三栏)
│   ├── hooks      → HooksPage (双栏)
│   ├── prompts    → PromptPanel
│   ├── mcp        → UnifiedMcpPanel
│   └── settings   → SettingsPage (Dialog)
│
├── 对话框层 (z-index 较高)
│   ├── AddProviderDialog
│   ├── EditProviderDialog
│   ├── ConfirmDialog
│   ├── DeepLinkImportDialog
│   ├── InstallScopeDialog
│   └── UsageScriptModal
│
└── 页脚 (可选)
    └── UsageFooter
```

---

## 设计模式总结

| 模式 | 使用场景 | 组件示例 |
|------|----------|----------|
| **三栏布局** | 资源管理页面 | Skills, Commands, Agents |
| **双栏布局** | 简化资源管理 | Hooks |
| **卡片列表** | 提供商管理 | ProviderList |
| **Dialog 模式** | 设置、表单编辑 | SettingsPage, AddProviderDialog |
| **Tab 切换** | 多视图切换 | UsageDashboard, 视图模式 |
| **Accordion** | 分组设置 | SettingsPage |
| **Drag & Drop** | 排序功能 | ProviderList |
| **深链接导入** | 外部资源导入 | DeepLinkImportDialog |

---

## 技术栈

- **UI 框架**: React + TypeScript
- **样式**: Tailwind CSS
- **组件库**: shadcn/ui (Radix UI)
- **动画**: Framer Motion
- **状态管理**: TanStack Query
- **图标**: Lucide React
- **桌面框架**: Tauri 2
